components:
- invocation-type: sync
  name: demo-api-create
  size: small
  timeout: short
  type: action
- invocation-type: sync
  name: demo-api-delete
  size: small
  timeout: short
  type: action
- events:
  - name: layers-delete
    pattern:
      eventName:
      - REMOVE
      pk:
      - BUILD
    table: demo
    type: dynamodb
  invocation-type: async
  name: demo-layers-delete
  permissions:
  - lambda:DeleteLayerVersion
  - lambda:ListLayers
  size: small
  timeout: short
  type: action
- events:
  - name: layers-update
    pattern:
      eventName:
      - INSERT
      sk:
      - STAGE
    table: demo
    type: dynamodb  
  invocation-type: async
  name: demo-pipeline-builds-update
  size: small
  timeout: short
  type: action
- events:
  - bucket: demo
    name: layers-create
    pattern:
      object:
        key:
        - prefix: build
    type: s3
  invocation-type: async
  name: demo-layers-create
  permissions:
  - lambda:PublishLayerVersion
  - s3:GetObject
  size: large
  timeout: long
  type: action
- events:
  - name: pipeline-stages-init
    pattern:
      eventName:
      - INSERT
      pk:
      - BUILD
    table: demo
    type: dynamodb
  invocation-type: async
  name: demo-pipeline-stages-init
  permissions:
  - codebuild:startBuild
  size: medium
  timeout: medium
  type: action
- invocation-type: async
  name: demo-pipeline-stages-update
  size: small
  timeout: short
  type: action
- invocation-type: sync
  name: demo-ui-builds
  size: small
  timeout: short
  type: action
  permissions:
  - dynamodb:Query
- invocation-type: sync
  name: demo-ui-stages
  size: small
  timeout: short
  type: action
  permissions:
  - dynamodb:Query
- auth-type: open
  endpoints:
  - action: demo-ui-builds
    method: GET
    name: ui-builds-list
    path: list-builds
  - action: demo-ui-stages
    method: GET
    name: ui-stages-list
    parameters:
    - layername
    path: list-stages
  name: demo-public
  stage:
    name: 1-0-0
  type: api
- auth-type: cognito
  endpoints:
  - action: demo-api-create
    method: POST
    name: api-create
    path: create-layer
    schema:
      properties:
        name:
          type: string
        path:
          type: string
        type:
          type: string
      required:
      - name
      - type
      type: object
  - action: demo-api-delete
    method: POST
    name: api-delete
    path: delete-layer
    schema:
      properties:
        name:
          type: string
      required:
      - name
      type: object
  name: demo-private
  stage:
    name: 1-0-0
  type: api
  userpool: demo
- name: demo
  type: bucket
- name: demo
  indexes:
  - name: codebuild-build-id
    type: S
  streaming:
    debug: true
    size: small
    timeout: short
  type: table
- name: demo
  type: userpool
- name: demo
  type: topic
  action: demo-layers-delete
- name: demo
  values:
    foo: bar
  type: secret
- name: demo
  type: timer
  action: demo-api-create
  body: 
    foo: bar
  interval: 1
parameters:
  memory-size-small: 512
  memory-size-medium: 1024
  memory-size-large: 2048
  runtime-version: '3.8'
  timeout-short: 5
  timeout-medium: 15
  timeout-long: 30
